<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Peer Gynt Ocean</title>

  <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
  <script src="./combo-ocean.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/three@0.159.0/examples/js/loaders/EXRLoader.js"></script>
  <link rel="stylesheet" href="./style.css">

  <script>
AFRAME.registerComponent('exr-sky', {
  schema: { type: 'asset' },

  init: function () {
    const sceneEl = this.el.sceneEl;
    const url = this.data;

    const loader = new THREE.EXRLoader();

    loader.load(url, (texture) => {

      texture.mapping = THREE.EquirectangularReflectionMapping;

      sceneEl.object3D.background = texture;
      sceneEl.object3D.environment = texture;

    });
  }
});
</script>
  
</head>

<body>
<a-scene exr-sky="./wasteland_clouds_puresky_2k.exr">

  <!-- Ocean -->
  <a-ocean-plane
    position="0 0 0"
    material="color: #4f8cff; opacity: 0.85">
  </a-ocean-plane>

  <!-- Cube -->
  <a-box
    position="0 1 -5"
    color="#00ff88">
  </a-box>

  <!-- Camera with WASD -->
  <a-entity position="0 1.6 5">
    <a-camera wasd-controls look-controls>
      <a-cursor></a-cursor>
    </a-camera>
  </a-entity>

</a-scene>

<div style="
  position:absolute;
  bottom:20px;
  width:100%;
  text-align:center;
  font-size:20px;
  color:black;">
  Point to the cube and click & WASD
</div>

</body>
</html>
