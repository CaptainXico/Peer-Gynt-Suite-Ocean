<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Peer Gynt Ocean</title>

  <!-- Load A-Frame FIRST -->
  <script defer src="https://aframe.io/releases/1.5.8/aframe.min.js"></script>

  <!-- Load HDR loader SECOND -->
  <script defer src="https://cdn.jsdelivr.net/npm/three@0.158.0/examples/js/loaders/RGBELoader.js"></script>

  <!-- Load ocean component THIRD -->
  <script defer src="./combo-ocean.js"></script>

  <!-- Register hdr-sky component LAST -->
  <script defer>
    window.addEventListener("load", function () {

      AFRAME.registerComponent('hdr-sky', {
        schema: { type: 'asset' },

        init: function () {

          const sceneEl = this.el.sceneEl;
          const loader = new THREE.RGBELoader();

          loader.load(this.data, (texture) => {

            texture.mapping = THREE.EquirectangularReflectionMapping;

            sceneEl.object3D.background = texture;
            sceneEl.object3D.environment = texture;

            sceneEl.renderer.toneMapping = THREE.ACESFilmicToneMapping;
            sceneEl.renderer.toneMappingExposure = 1;

          });

        }
      });

    });
  </script>

  <link rel="stylesheet" href="./style.css">

</head>

<body>
<a-scene hdr-sky="./wasteland_clouds_puresky_2k.hdr">

  <!-- Ocean -->
  <a-ocean-plane
    position="0 0 0"
    material="color: #4f8cff; opacity: 0.85">
  </a-ocean-plane>

  <!-- Cube -->
  <a-box
    position="0 1 -5"
    color="#00ff88">
  </a-box>

  <!-- Camera with WASD -->
  <a-entity position="0 1.6 5">
    <a-camera wasd-controls look-controls>
      <a-cursor></a-cursor>
    </a-camera>
  </a-entity>

</a-scene>

<div style="
  position:absolute;
  bottom:20px;
  width:100%;
  text-align:center;
  font-size:20px;
  color:black;">
  Point to the cube and click & WASD
</div>

</body>
</html>
